<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-robot INCAR Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ü§ñ Q-robot INCAR Generator</h1>
            <p class="subtitle">Create VASP INCAR files with an intuitive interface</p>
        </header>

        <div class="content-wrapper">
            <!-- Left Panel: Task Selection and Parameters -->
            <div class="panel panel-left">
                <section class="section">
                    <h2>üìã Select Calculation Task(s)</h2>
                    <div class="task-categories" id="taskCategories">
                        <!-- Task categories will be populated by JavaScript -->
                    </div>
                </section>

                <section class="section">
                    <h2>‚öôÔ∏è Standard Parameters</h2>
                    <div class="parameter-sections" id="standardSections">
                        <!-- Standard parameter sections will be populated here -->
                    </div>
                </section>

                <section class="section">
                    <h2>üéØ Task Parameters</h2>
                    <div id="taskParams" class="parameter-sections">
                        <p class="info-text">Select a task to see its parameters</p>
                    </div>
                </section>

                <section class="section">
                    <h2>‚úèÔ∏è Custom Parameters</h2>
                    <div class="custom-params">
                        <div id="customParamsContainer">
                            <div class="param-input-row">
                                <input type="text" class="param-key" placeholder="Parameter name (e.g., ISPIN)">
                                <input type="text" class="param-value" placeholder="Value (e.g., 2)">
                                <button class="btn-remove" onclick="removeCustomParam(this)">‚úï</button>
                            </div>
                        </div>
                        <button class="btn-secondary" onclick="addCustomParam()">+ Add Parameter</button>
                    </div>
                </section>
            </div>

            <!-- Right Panel: Preview and Actions -->
            <div class="panel panel-right">
                <section class="section">
                    <h2>üëÄ INCAR Preview</h2>
                    <textarea id="incarPreview" class="incar-preview" placeholder="# INCAR preview will appear here. You can edit it before saving!"></textarea>
                    <div class="preview-stats" id="previewStats"></div>
                </section>

                <section class="section">
                    <h2>üíæ Generate & Save & Export</h2>
                    <div class="action-buttons">
                        <button class="btn-primary" onclick="generateINCAR()">Generate INCAR</button>
                        <button class="btn-success" onclick="downloadINCAR()" id="downloadBtn" disabled>
                            üíæ Download INCAR File
                        </button>
                        <button class="btn-secondary" onclick="copyToClipboard()">
                            üìã Copy to Clipboard
                        </button>
                        <button class="btn-secondary" onclick="resetForm()">
                            üîÑ Reset Form
                        </button>
                    </div>
                </section>

                <section class="section">
                    <h2>‚ÑπÔ∏è Information</h2>
                    <div class="info-wrapper info-grid-layout">
                        <!-- 1. About this tool - Full width row -->
                        <div class="info-box info-about">
                            <p><strong>About this tool:</strong> This interface helps you generate VASP INCAR files by combining standard parameters, task-specific settings, and custom options.</p>
                        </div>
                        
                        <!-- 2. WeChat QR -->
                        <div class="info-box info-box-vertical">
                            <img src="/figs/wechat_qr.jpg" alt="WeChat QR" class="qr-code-small">
                            <div class="info-text">
                                <p><strong>WeChat</strong></p>
                                <p style="font-size: 0.85em; margin: 3px 0;">BigBroSci</p>
                            </div>
                        </div>
                        
                        <!-- 3. QQ Group QR -->
                        <div class="info-box info-box-vertical">
                            <img src="/figs/QQ.jpg" alt="QQ QR" class="qr-code-small">
                            <div class="info-text">
                                <p><strong>QQ Group</strong></p>
                                <p style="font-size: 0.85em; margin: 3px 0;">1012023869</p>
                            </div>
                        </div>
                        
                        <!-- 4. Donate -->
                        <div class="info-box info-box-vertical">
                            <img src="/figs/wechat_pay.jpg" alt="Donate QR" class="qr-code-donate">
                            <div class="info-text">
                                <p><strong>Donate Me ‚òï</strong></p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // Pass tasks from Flask to JavaScript
        const tasks = {{ tasks|tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
